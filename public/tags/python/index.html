<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python | TIL by Sakydev</title>
<meta name=keywords content><meta name=description content="Things I learned today by Sakydev"><meta name=author content="Saqib Razzaq"><link rel=canonical href=https://examplesite.com/tags/python/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://examplesite.com/tags/python/index.xml><link rel=alternate hreflang=en href=https://examplesite.com/tags/python/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://examplesite.com/tags/python/"><meta property="og:site_name" content="TIL by Sakydev"><meta property="og:title" content="Python"><meta property="og:description" content="Things I learned today by Sakydev"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://examplesite.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://examplesite.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Python"><meta name=twitter:description content="Things I learned today by Sakydev"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://examplesite.com/ accesskey=h title="Today I Learned (Alt + H)"><img src=https://examplesite.com/apple-touch-icon.png alt aria-label=logo height=35>Today I Learned</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://examplesite.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://examplesite.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://examplesite.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=http://github.com/sakydev/til title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://examplesite.com/>Home</a>&nbsp;»&nbsp;<a href=https://examplesite.com/tags/>Tags</a></div><h1>Python
<a href=/tags/python/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to change windows wallpaper using Python3</h2></header><div class=entry-content><p>Following code can be used for changing windows wallpaper
import ctypes ctypes.windll.user32.SystemParametersInfoW(20, 0, image , 0)</p></div><footer class=entry-footer><span title='2021-10-11 00:00:00 +0000 UTC'>October 11, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;16 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to change windows wallpaper using Python3" href=https://examplesite.com/posts/change-windows-wallpaper-using-python-3/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Python - search questions using wolframalpha</h2></header><div class=entry-content><p>import json, requests def search(keyword): keyword = keyword.replace(' ', '+') data = requests.get('https://api.wolframalpha.com/v2/query?input=' + keyword + '&amp;format=plaintext&amp;output=json&amp;appid=api_id_here') readable = data.json() results = readable['queryresult'] if results['success'] == True: for pod in results['pods']: if pod['title'] == 'Result': try: value = pod['subpods'][0]['plaintext'] return value except Exception as e: value = '' raise e else: print('Something went wrong. Below is full data') print(readable)</p></div><footer class=entry-footer><span title='2021-10-11 00:00:00 +0000 UTC'>October 11, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;59 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to Python - search questions using wolframalpha" href=https://examplesite.com/posts/python-search-questions-using-wolfaramalpha/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Python + Scrapy: find element with text</h2></header><div class=entry-content><p>response.xpath("//*[contains(text(), 'txt goes here')]").getall()</p></div><footer class=entry-footer><span title='2021-09-29 00:00:00 +0000 UTC'>September 29, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;4 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to Python + Scrapy: find element with text" href=https://examplesite.com/posts/py-scrapy-find-element-with-text/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to update a request URL in Scrapy</h2></header><div class=entry-content><p>Often times you might want to be able to manipulate every outgoing request. You don’t have to modify all points in your scrapper where you’re making requests. You can modify your middleware.
Open middlewares.py in your project and paste following code in process_request method
original_url = request.url new_url = 'modified_url_here' request = request.replace(url=new_url)</p></div><footer class=entry-footer><span title='2021-09-27 00:00:00 +0000 UTC'>September 27, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;53 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to update a request URL in Scrapy" href=https://examplesite.com/posts/update-a-request-url-in-scrapy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Python - read txt file separated by line as list</h2></header><div class=entry-content><p>In a web crawling project of mine I had to read proxies from a txt file. Each proxy was on a new line. I used following code to read them as list.
proxies = [line.rstrip('\n') for line in open(directory + '/proxies_v2.txt')]
Additionally, I shuffle them to make sure their order is random.
random.shuffle(proxies)</p></div><footer class=entry-footer><span title='2021-09-11 00:00:00 +0000 UTC'>September 11, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;53 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to Python -  read txt file separated by line as list" href=https://examplesite.com/posts/python-read-txt-file-separated-by-line/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to use proxies with Requests in Python</h2></header><div class=entry-content><p>import requests proxy = 'proxy:goes:here' proxyDict = {"http" : proxy, "https" : proxy} response = requests.get('https://www.url.com', proxies=proxyDict) You can send the POST requests using a similar format. Headers can be added to the request using headers={}</p></div><footer class=entry-footer><span title='2021-07-29 00:00:00 +0000 UTC'>July 29, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;36 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to use proxies with Requests in Python" href=https://examplesite.com/posts/proxy-usage-with-requests-in-python/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to retry failed requests in Scrapy</h2></header><div class=entry-content><p>You can add one or more statuses in settings.py. Scrapy will process requests normally and when one of these statuses is encountered, it will retry that request.
You can modify RETRY_HTTP_CODES and add any number of statuses there.
You can also control how many times to try with RETRY_TIMES</p></div><footer class=entry-footer><span title='2021-07-23 00:00:00 +0000 UTC'>July 23, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;49 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to retry failed requests in Scrapy" href=https://examplesite.com/posts/retry-failed-requests-in-scrapy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to filter and delete Google Chrome history items with Python</h2></header><div class=entry-content><p>The following snippet can be used for filtering out URLs that where keywords match title or url. They are then deleted from history saving you lots of time that you’d otherwise spend manually filtering and deleting.
Google Chrome must be closed before running this script.
import sqlite3, webbrowser def cleanChrome(): con = sqlite3.connect('C:\\Users\\{username}\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\History') cursor = con.cursor() cursor.execute("select id, url, title from urls") urls = cursor.fetchall() # keywords that you'd like to detect and delete # it looks for these keywords in page title and urls keywords = [] total = len(urls) done = 0 deleted = 0 pendingIds = [] for url in urls: jenny.output(f'Processing {done} / {total} urls [deleted: {deleted}]') uid = url[0] link = url[1].lower() title = url[2].lower() for keyword in keywords: if keyword in link or keyword in title: jenny.output(f'{keyword} matched, deleting..') pendingIds.append((uid,)) deleted += 1 done += 1 query = 'DELETE FROM urls WHERE id=?' cursor.executemany(query, pendingIds) con.commit()</p></div><footer class=entry-footer><span title='2021-06-11 00:00:00 +0000 UTC'>June 11, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;153 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to filter and delete Google Chrome history items with Python" href=https://examplesite.com/posts/filter-and-delete-google-chrome-history-items-with-python/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to read a CSV file in python</h2></header><div class=entry-content><p>with open(path, mode='r') as csvFile: reader = csv.DictReader(csvFile) lineCount = 0 for row in reader: if lineCount > 0: # do stuff here lineCount += 1</p></div><footer class=entry-footer><span title='2021-05-11 00:00:00 +0000 UTC'>May 11, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;26 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to read a CSV file in python" href=https://examplesite.com/posts/read-a-csv-file-in-python/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to run a function when Scrapy spider closes</h2></header><div class=entry-content><p>Scrapy spider can close unexpectedly for many reasons. If you’d like to notify yourself or do anything whenever a spider closes (expectedly or unexpectedly)
Create a function named anything e.g crawlFinished() Then paste self.crawlFinish() at the bottom of closed() function Now your function will be executed each time crawler exits</p></div><footer class=entry-footer><span title='2021-05-01 00:00:00 +0000 UTC'>May 1, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;50 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to run a function when Scrapy spider closes" href=https://examplesite.com/posts/run-a-fucntion-when-scrapy-spider-closes/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to open a URL in chrome using Python</h2></header><div class=entry-content><p>import webbrowser webbrowser.register('chrome', None, webbrowser.BackgroundBrowser("C://Program Files (x86)//Google//Chrome//Application//chrome.exe")) webbrowser.get('chrome').open('http://url.com')</p></div><footer class=entry-footer><span title='2021-04-11 00:00:00 +0000 UTC'>April 11, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;8 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to open a URL in chrome using Python" href=https://examplesite.com/posts/open-a-url-in-chrome-using-python/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to make scrapy spider interactive at any point</h2></header><div class=entry-content><p>from scrapy.shell import inspect_response inspect_response(response, self) Read this for more details</p></div><footer class=entry-footer><span title='2021-03-20 00:00:00 +0000 UTC'>March 20, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;11 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to make scrapy spider interactive at any point" href=https://examplesite.com/posts/make-scrapy-spider-interactive-any-point/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Find element that has particular text in Scrapy</h2></header><div class=entry-content><p>response.xpath("//*[contains(text(), 'txt goes here')]").getall()</p></div><footer class=entry-footer><span title='2021-03-19 00:00:00 +0000 UTC'>March 19, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;4 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to Find element that has particular text in Scrapy" href=https://examplesite.com/posts/find-element-that-has-particular-text-in-scrapy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to use proxies with Scrapy</h2></header><div class=entry-content><p>There are two main ways to use proxies in Scrapy. You can either use it per request basis or use it with every scrapy outgoing request.
How to use proxy with a single request
proxy = 'proxy_here' return Request(url=url, callback=self.parse, meta={"proxy": proxy}) How to use proxy with every request Go to to middlewares.py and update process_request method and paste following code
proxy = 'proxy_here' request.meta['proxy'] = proxy</p></div><footer class=entry-footer><span title='2021-02-24 00:00:00 +0000 UTC'>February 24, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;67 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to use proxies with Scrapy" href=https://examplesite.com/posts/use-proxies-with-scrapy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Python + Scrapy: retry failed requests</h2></header><div class=entry-content><p>You can add one or more statuses in settings.py. Scrapy will process requests normally and when one of these statuses is encountered, it will retry that request.
You can modify RETRY_HTTP_CODES and add any number of statuses there.
You can also control how many times to try with RETRY_TIMES</p></div><footer class=entry-footer><span title='2021-01-21 00:00:00 +0000 UTC'>January 21, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;49 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to Python + Scrapy: retry failed requests" href=https://examplesite.com/posts/py-scrapy-retry-failed-requests/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to handle multiple endpoints in same function in Flask</h2></header><div class=entry-content><p>You can execute same code with a conditional if you want multiple endpoints hiting the same functions. This is awesome because it allows you to reduce code duplication and the same block of code can do multiple things with minor changes.
Let’s say you want to diplay a page on following two urls
site.com/blog/page and site.com/page
@app.route('/blog/&lt;slug>', endpoint='post')
@app.route('/&lt;slug>', endpoint='page')
def post(slug):
post = getPost(slug)
if request.endpoint == 'post':
title = post['title']
elif request.endpoint == 'page':
title = 'This is a page'
return render_template('post.html', post=post, title=title)</p></div><footer class=entry-footer><span title='2020-05-17 00:00:00 +0000 UTC'>May 17, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;86 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to handle multiple endpoints in same function in Flask" href=https://examplesite.com/posts/multiple-endpoints-in-same-functions-in-flask/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to dynamically generate URL for assets in Flask</h2></header><div class=entry-content><p>You can use url_for function for building URLs. For example, let’s say you have a assets folder called static in main app directory. You can use following code in template files to include CSS files
{{ url_for('static', filename='css/style.css') }}</p></div><footer class=entry-footer><span title='2020-05-14 00:00:00 +0000 UTC'>May 14, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;39 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to How to dynamically generate URL for assets in Flask" href=https://examplesite.com/posts/dynamically-generate-url-for-assets-in-flask/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to count files per day in a directory in Linux</h2></header><div class=entry-content><p>find directory -type f -printf '%TY-%Tm-%Td\n' | sort | uniq -c</p></div><footer class=entry-footer><span title='2019-03-11 00:00:00 +0000 UTC'>March 11, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;11 words&nbsp;·&nbsp;Saqib Razzaq</footer><a class=entry-link aria-label="post link to  How to count files per day in a directory in Linux" href=https://examplesite.com/posts/count-files-per-day-in-a-directory-in-linux/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Markdown Syntax Guide</h2></header><div class=entry-content><p>This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.
...</p></div><footer class=entry-footer><span title='2019-03-11 00:00:00 +0000 UTC'>March 11, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;446 words&nbsp;·&nbsp;Hugo Authors</footer><a class=entry-link aria-label="post link to Markdown Syntax Guide" href=https://examplesite.com/posts/markdown-syntax/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://examplesite.com/>TIL by Sakydev</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>